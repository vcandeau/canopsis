#!/usr/bin/env python

from caccount import caccount
from cstorage import cstorage
from cselector import cselector
from crecord import crecord
from csla import csla

import logging
import time

namespaces = ['cache', 'inventory', 'history', 'sla', 'object']

## Create root account
account = caccount(user="root", group="root")

## Create storage
storage = cstorage(account, namespace='object', logging_level=logging.DEBUG)
for namespace in namespaces:
	storage.drop_namespace(namespace)

## Save account
storage.put(account)

## Save Selectors
selector = cselector(name="all-hosts", storage=storage, namespace="inventory")
selector.mfilter = {'source_type': 'host'}
selector.save()

selector = cselector(name="all-services", storage=storage, namespace="inventory")
selector.mfilter = {'source_type': 'service'}
selector.save()

## Save SLA
sla = csla(name="all-services", storage=storage, selector=selector)
sla.set_threshold(98,95)
sla.set_cycle(int(time.time())+60, 120, False)
sla.save()


