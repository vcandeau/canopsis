#!/usr/bin/env python

from pymongo import Connection

mconn = Connection('localhost', 27017)
mdb = mconn['canopsis']

collections = ['selectors', 'inventory', 'views', 'cache']

## remove all records
for collection in collections:
	mdb.drop_collection(collection)
	
	
## Selectors
record = {
	'_id':			'all-hosts',
	'category':		'internal',
	'name':			'All hosts',
	'description':	'Select all hosts',
	'collection':	'inventory',
	'filter':		{ 'source_type': 'host'}
}
mdb['selectors'].insert(record)


record = {
	'_id':			'all-services',
	'category':		'internal',
	'name':			'All services',
	'description':	'Select all services',
	'collection':	'inventory',
	'filter':		{ 'source_type': 'service'}
}
mdb['selectors'].insert(record)

record = {
	'_id':			'all-selectors',
	'category':		'internal',
	'name':			'All selectors',
	'description':	'Select all selectors',
	'collection':	'selectors',
	'filter':		'all'
}
mdb['selectors'].insert(record)

## Views
record = {
	'_id':			'anonymous-default-dashboard',
	'owner':		'anonymous',
	'acl':			'owner',
	'type':			'dashboard',
	'title':		'Dashboard',
	'description':	'Welcome view',
	'selector':		None,
	'items': [	{ 'items': [
				{'title': 'All services', 'widget': 'Widgets.HCPieAvailServices', 'selector': 'all-services', 'height': 300, 'width': 300, 'refreshInterval': 60},
			]},
			{ 'items': [
				{'title': 'All Hosts', 'widget': 'Widgets.HCPieAvailServices', 'selector': 'all-hosts', 'height': 300, 'width': 300, 'refreshInterval': 60},
			]},
			{ 'items': [
				{'title': 'All services', 'widget': 'Widgets.HCPieAvailServices', 'selector': 'all-services', 'height': 300, 'width': 300, 'refreshInterval': 60, 'showInLegend': False},
			]},
			{ 'items': [
				{'title': 'All Hosts', 'widget': 'Widgets.HCPieAvailServices', 'selector': 'all-hosts', 'height': 300, 'width': 300, 'refreshInterval': 60, 'showInLegend': False},
			]},

		]
}
mdb['views'].insert(record)

record = {
	'_id':			'id-view-all-hosts',
	'owner':		'anonymous',
	'acl':			'authed',
	'type':			'leaf',
	'title':		'Hosts',
	'description':	'All hosts',
	'items': [{'items': [{'widget': 'Widgets.Grid', 'selector': 'all-hosts', 'collection': 'inventory', 'columsClass': 'inventory-hosts', 'searchField': ['host_name'], 'refreshInterval': 60 }]}]
}
mdb['views'].insert(record)

record = {
	'_id':			'id-view-all-services',
	'owner':		'anonymous',
	'acl':			'authed',
	'type':			'leaf',
	'title':		'Services',
	'description':	'All services',
	'items': [{'items': [{'widget': 'Widgets.Grid', 'selector': 'all-services', 'collection': 'inventory', 'columsClass': 'inventory-services', 'groupField': 'host_name', 'searchField': ['host_name', 'service_description'], 'refreshInterval': 60 }]}]
}
mdb['views'].insert(record)

record = {
	'_id':			'id-config-selectors',
	'owner':		'anonymous',
	'acl':			'authed',
	'type':			'leaf',
	'title':		'Selectors',
	'description':	'All Selectors',
	'items': [{'items': [{'widget': 'Widgets.Grid', 'selector': 'all-selectors', 'collection': 'selectors', 'groupField': 'category'}]}]
}
mdb['views'].insert(record)



### SLA
record = {
	'_id':			'id-sla-all-services',
	'owner':		'anonymous',
	'acl':			'authed',
	'title':		'SLA: All service',
	'description':		'description',
	'selector':		'all-services',
}
mdb['sla'].insert(record)


